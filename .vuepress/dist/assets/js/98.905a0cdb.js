(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{682:function(e,t,a){"use strict";a.r(t);var o=a(0),s=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"running-a-chain-node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#running-a-chain-node"}},[e._v("#")]),e._v(" Running a Chain-Node")]),e._v(" "),a("p",[e._v("The Chain-Nodes are the backbone of KYVE. The chain layer is a\ncompletely sovereign "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Proof_of_stake",target:"_blank",rel:"noopener noreferrer"}},[e._v("Proof of Stake"),a("OutboundLink")],1),e._v("\nblockchain build with "),a("a",{attrs:{href:"https://ignite.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Ignite"),a("OutboundLink")],1),e._v(". This\nblockchain is run by independent nodes we call "),a("em",[e._v("Chain-Nodes")]),e._v("\nsince they're running on the chain level. The native currency\nof the KYVE chain is "),a("RouterLink",{attrs:{to:"/basics/kyve.html"}},[e._v("$KYVE")]),e._v(", it secures the chain\nand allows chain nodes to stake and other users to delegate into them.")],1),e._v(" "),a("h4",{attrs:{id:"requirements"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[e._v("#")]),e._v(" Requirements")]),e._v(" "),a("p",[e._v("Minimum requirements")]),e._v(" "),a("ul",[a("li",[e._v("2vCPU")]),e._v(" "),a("li",[e._v("2GB RAM (plus 8GB SWAP during chain-upgrades)")]),e._v(" "),a("li",[e._v("150GB DISK")])]),e._v(" "),a("p",[e._v("The disk requirements will keep on expanding over time: the 150GB figure was valid\non May 7th 2022 but it will not stay that way forever. Consider giving 2 to 3 times\nthat amount in order to avoid having to resize your volumes too quickly.")]),e._v(" "),a("h2",{attrs:{id:"genesis-installation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#genesis-installation"}},[e._v("#")]),e._v(" Genesis Installation")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",[a("strong",[e._v("IMPORTANT")]),e._v(":\nThis guide assumes a GNU/Linux amd64 system.")])]),e._v(" "),a("p",[e._v("During the time, chain-upgrades occur but the blockchains stays the same.\nTherefore, it is necessary to process older blocks with the appropriate version.\nWe use Cosmovisor to handle automatic upgrades. The setup is explained after\nthe initial setup.")]),e._v(" "),a("p",[e._v("In the genesis setup the node will be fully configured. After that one needs to configure\nthe Cosmovisor.")]),e._v(" "),a("h4",{attrs:{id:"obtaining-the-binaries"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#obtaining-the-binaries"}},[e._v("#")]),e._v(" Obtaining the binaries")]),e._v(" "),a("p",[e._v("We provide prebuilt binaries on the chain "),a("a",{attrs:{href:"https://github.com/KYVENetwork/chain/releases/tag/v0.0.1",target:"_blank",rel:"noopener noreferrer"}},[e._v("GitHub repo"),a("OutboundLink")],1),e._v(".\nPlease refer to the "),a("a",{attrs:{href:"https://github.com/KYVENetwork/chain",target:"_blank",rel:"noopener noreferrer"}},[e._v("Readme"),a("OutboundLink")],1),e._v(" for instructions on how to build them.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"d2dldCBodHRwczovL2dpdGh1Yi5jb20vS1lWRU5ldHdvcmsvY2hhaW4vcmVsZWFzZXMvZG93bmxvYWQvdjAuMC4xL2NoYWluX2xpbnV4X2FtZDY0LnRhci5negp0YXIgLXh2emYgY2hhaW5fbGludXhfYW1kNjQudGFyLmd6CgojIFRoZSBbbW9uaWtlcl0gaXMgYSBodW1hbi1yZWFkYWJsZSBuYW1lIGZvciB5b3VyIG5vZGUKLi9jaGFpbmQgaW5pdCBbbW9uaWtlcl0gLS1jaGFpbi1pZCBrb3JlbGxpYQo="}}),e._v(" "),a("p",[e._v("Obtain the genesis")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"d2dldCBodHRwczovL2dpdGh1Yi5jb20vS1lWRU5ldHdvcmsvY2hhaW4vcmVsZWFzZXMvZG93bmxvYWQvdjAuMC4xL2dlbmVzaXMuanNvbgojIG1vdmUgdG8gdGhlIGNoYWluLW5vZGUgZGlyZWN0b3J5Cm12IGdlbmVzaXMuanNvbiB+Ly5reXZlL2NvbmZpZy9nZW5lc2lzLmpzb24K"}}),e._v(" "),a("p",[e._v("It is important to start with the oldest version "),a("code",[e._v("v0.0.1")]),e._v(" (the genesis version).")]),e._v(" "),a("p",[e._v("Start the chain the first time:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"Li9jaGFpbmQgc3RhcnQgLS1wMnAuc2VlZHM9MDJkZDJjMjY5NDhlYTc1OGEyNWQzZGJjOTE3NDRmODg5NzY4MTY1MkAzLjczLjI3LjE4NToyNjY1Ngo="}}),e._v(" "),a("p",[e._v("The node should now be starting to sync the chain. If it doesn't, you can always look\nfor other peers "),a("a",{attrs:{href:"https://rpc.korellia.kyve.network/net_info",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),a("OutboundLink")],1),e._v(" and use it with\nthe "),a("code",[e._v("p2p.persistent_peers")]),e._v(" param, for example:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"LS0tcDJwLnBlcnNpc3RlbnRfcGVlcnMgNzA1NTZjODIzNTJiOTkxOWZiNmYzMzliOWRhMGViYzU4N2U5MTQ4Y0AzLjY4LjIzMi4xMTc6MjY2NTYK"}}),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",[a("strong",[e._v("IMPORTANT")]),e._v(":\nThe node can be stopped with "),a("code",[e._v("ctrl + c")]),e._v(". You do not need to wait for it to sync. Setting up a daemon service is explained later in this chapter.")])]),e._v(" "),a("p",[e._v("The seed only needs to be provided for the first startup.\nIt is then automatically saved to the address book.")]),e._v(" "),a("p",[e._v('The chain will start to sync until the first governance upgrade\nproposal starts to occur. The Chain-Node will halt and probably print a\n"CONSENSUS FAILURE" error. When this happens the next released binary\nneeds to be started.')]),e._v(" "),a("p",[e._v("To avoid replacing the binaries manually and allow automatic updates\nwe recommend setting up the Cosmovisor.")]),e._v(" "),a("h2",{attrs:{id:"setup-cosmovisor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setup-cosmovisor"}},[e._v("#")]),e._v(" Setup Cosmovisor")]),e._v(" "),a("p",[e._v("The Cosmovisor is a tool that listens to on-chain governance proposals\nand automatically replaces the binary.")]),e._v(" "),a("p",[e._v("The build instructions can be found "),a("a",{attrs:{href:"https://github.com/cosmos/cosmos-sdk/tree/master/cosmovisor",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),a("OutboundLink")],1),e._v(",\nbut we do provide the "),a("a",{attrs:{href:"https://github.com/KYVENetwork/chain/releases/download/v0.0.1/cosmovisor_linux_amd64",target:"_blank",rel:"noopener noreferrer"}},[e._v("Linux binary"),a("OutboundLink")],1),e._v(" for convenience purposes.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"d2dldCBodHRwczovL2dpdGh1Yi5jb20vS1lWRU5ldHdvcmsvY2hhaW4vcmVsZWFzZXMvZG93bmxvYWQvdjAuMC4xL2Nvc21vdmlzb3JfbGludXhfYW1kNjQgJmFtcDsmYW1wOyBcCm12IGNvc21vdmlzb3JfbGludXhfYW1kNjQgY29zbW92aXNvciAmYW1wOyZhbXA7IFwKY2htb2QgK3ggY29zbW92aXNvcgo="}}),e._v(" "),a("p",[e._v("Setup the directory")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"bWtkaXIgLXAgfi8ua3l2ZS9jb3Ntb3Zpc29yL2dlbmVzaXMvYmluLyAmYW1wOyZhbXA7IFwKZWNobyAmcXVvdDt7fSZxdW90OyAmZ3Q7IH4vLmt5dmUvY29zbW92aXNvci9nZW5lc2lzL3VwZ3JhZGUtaW5mby5qc29uCg=="}}),e._v(" "),a("p",[e._v("Copy the binary from the first section to the Cosmovisor directory.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"Y3AgY2hhaW5kIH4vLmt5dmUvY29zbW92aXNvci9nZW5lc2lzL2Jpbi9jaGFpbmQK"}}),e._v(" "),a("p",[e._v("Then export the following environment variables:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"ZXhwb3J0IERBRU1PTl9IT01FPSZxdW90OyRIT01FLy5reXZlJnF1b3Q7CmV4cG9ydCBEQUVNT05fTkFNRT0mcXVvdDtjaGFpbmQmcXVvdDsKCiMgb3B0aW9uYWwgb24gd2hldGhlciBhdXRvLWRvd25sb2FkIHNob3VsZCBiZSBlbmFibGVkCiMgZm9yIGEgc2ltcGxlIG5vZGUgc2V0dXAgd2UgcmVjb21tZW5kIHRvIGxlYXZlIHRoaXMgdHJ1ZQpleHBvcnQgREFFTU9OX0FMTE9XX0RPV05MT0FEX0JJTkFSSUVTPSZxdW90O3RydWUmcXVvdDsK"}}),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",[a("strong",[e._v("IMPORTANT")]),e._v(": For production grade validator nodes it is highly recommended turning off auto download and downloading binaries manually instead.")])]),e._v(" "),a("p",[e._v("Start Cosmovisor")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"Li9jb3Ntb3Zpc29yIHN0YXJ0Cg=="}}),e._v(" "),a("p",[e._v("Cosmovisor can be stopped with "),a("code",[e._v("strg + C")]),e._v(". Setting up a daemon service is explained later in this chapter.")]),e._v(" "),a("h4",{attrs:{id:"obtaining-binaries-manually"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#obtaining-binaries-manually"}},[e._v("#")]),e._v(" Obtaining binaries manually")]),e._v(" "),a("p",[e._v("This is needed when "),a("code",[e._v("DAEMON_ALLOW_DOWNLOAD_BINARIES")]),e._v(" is set to "),a("code",[e._v("false")]),e._v(".")]),e._v(" "),a("p",[e._v("When a new chain-upgrade proposal occurs, users have multiple days time to vote on it.\nThe upgrade-proposal specifies an exact block-height on which the upgrade will be performed.\nWhen the proposal is up for vote the GitHub repository is already updated with the new tag and version.")]),e._v(" "),a("p",[e._v("Node-runners then have to check out the specific tag and build the binary on their on.\nAfter that the binary needs to be copied to the Cosmovisor directory.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"bXYgY2hhaW5kIH4vLmt5dmUvY29zbW92aXNvci91cGdyYWRlcy8kVVBHUkFERV9OQU1FL2Jpbi9jaGFpbmQK"}}),e._v(" "),a("p",[e._v("The "),a("code",[e._v("$UPGRADE_NAME")]),e._v(" will be the name of the tag of the commit. And is also specified in the governance proposal.")]),e._v(" "),a("h2",{attrs:{id:"setting-up-deamon-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-deamon-service"}},[e._v("#")]),e._v(" Setting up Deamon-service")]),e._v(" "),a("p",[e._v("For the daemon service root-privileges are required during the setup.")]),e._v(" "),a("p",[e._v("Create a service file.\n$USER is the Linux user which runs the process. Replace it before you copy the command")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"dGVlICZsdDsmbHQ7RU9GICZndDsgL2Rldi9udWxsIC9ldGMvc3lzdGVtZC9zeXN0ZW0va3l2ZWQuc2VydmljZQpbVW5pdF0KRGVzY3JpcHRpb249S1lWRSBDaGFpbi1Ob2RlIGRhZW1vbgpBZnRlcj1uZXR3b3JrLW9ubGluZS50YXJnZXQKCltTZXJ2aWNlXQpVc2VyPSRVU0VSCkV4ZWNTdGFydD0vaG9tZS8kVVNFUi9jb3Ntb3Zpc29yIHN0YXJ0ClJlc3RhcnQ9b24tZmFpbHVyZQpSZXN0YXJ0U2VjPTMKTGltaXROT0ZJTEU9aW5maW5pdHkKCkVudmlyb25tZW50PSZxdW90O0RBRU1PTl9IT01FPS9ob21lLyRVU0VSLy5reXZlJnF1b3Q7CkVudmlyb25tZW50PSZxdW90O0RBRU1PTl9OQU1FPWNoYWluZCZxdW90OwpFbnZpcm9ubWVudD0mcXVvdDtEQUVNT05fQUxMT1dfRE9XTkxPQURfQklOQVJJRVM9dHJ1ZSZxdW90OwoKW0luc3RhbGxdCldhbnRlZEJ5PW11bHRpLXVzZXIudGFyZ2V0CkVPRgo="}}),e._v(" "),a("p",[e._v("Start the daemon")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"c3VkbyBzeXN0ZW1jdGwgZW5hYmxlIGt5dmVkCnN1ZG8gc3lzdGVtY3RsIHN0YXJ0IGt5dmVkCg=="}}),e._v(" "),a("p",[e._v("It can be stopped using")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"c3VkbyBzeXN0ZW1jdGwgc3RvcCBreXZlZAo="}}),e._v(" "),a("p",[e._v("You can see its logs with")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"am91cm5hbGN0bCAtdSBreXZlZAo="}}),e._v(" "),a("h2",{attrs:{id:"becoming-a-validator"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#becoming-a-validator"}},[e._v("#")]),e._v(" Becoming a validator")]),e._v(" "),a("p",[e._v("To become a validator you need "),a("RouterLink",{attrs:{to:"/basics/kyve.html"}},[e._v("$KYVE")]),e._v(".\nThere are currently 100 validator slots, if all slots are taken\nyou need to stake more than the lowest one in the list to take its place.")],1),e._v(" "),a("p",[e._v("Make sure your node is fully synced and configured correctly.")]),e._v(" "),a("p",[e._v("Create a key or import an existing one")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"Li9jaGFpbmQga2V5cyBhZGQgW3lvdXIta2V5LW5hbWVdCiMgb3IKLi9jaGFpbmQga2V5cyBhZGQgW3lvdXIta2V5LW5hbWVdIC0tcmVjb3ZlcgojIEl0IHRoZW4gYXNrcyBmb3IgdGhlIG1uZW1vbmljCg=="}}),e._v(" "),a("p",[e._v("Make sure you have enough balance in your wallet.")]),e._v(" "),a("p",[e._v("Become a validator by submitting the "),a("code",[e._v("create-validator")]),e._v(" transaction to the network.\nYou need to substitute "),a("code",[e._v("[amount]")]),e._v(", "),a("code",[e._v("[moniker]")]),e._v(" and "),a("code",[e._v("[your-key-name]")])]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"Li9jaGFpbmQgdHggc3Rha2luZyBjcmVhdGUtdmFsaWRhdG9yIC0teWVzIFwKIC0tYW1vdW50IFthbW91bnRddGt5dmUgXAogLS1tb25pa2VyIFttb25pa2VyXSBcCiAtLWNvbW1pc3Npb24tcmF0ZSAmcXVvdDswLjEwJnF1b3Q7IFwKIC0tY29tbWlzc2lvbi1tYXgtcmF0ZSAmcXVvdDswLjIwJnF1b3Q7IFwKIC0tY29tbWlzc2lvbi1tYXgtY2hhbmdlLXJhdGUgJnF1b3Q7MC4wMSZxdW90OyBcCiAtLW1pbi1zZWxmLWRlbGVnYXRpb24gJnF1b3Q7MSZxdW90OyBcCiAtLXB1YmtleSAmcXVvdDskKC4vY2hhaW5kIHRlbmRlcm1pbnQgc2hvdy12YWxpZGF0b3IpJnF1b3Q7IFwKIC0tZnJvbSBbeW91ci1rZXktbmFtZV0gXAogLS1jaGFpbi1pZCBrb3JlbGxpYQo="}}),e._v(" "),a("p",[e._v("Learn your "),a("em",[e._v("valoper")]),e._v(" address")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"Li9jaGFpbmQga2V5cyBzaG93IFt5b3VyLWtleS1uYW1lXSAtYSAtLWJlY2ggdmFsCg=="}}),e._v(" "),a("p",[e._v("Delegate additional stake")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"Li9jaGFpbmQgdHggc3Rha2luZyBkZWxlZ2F0ZSBbVkFMT1BFUl9BRERSRVNTXSBbU1RBS0VfQU1PVU5UXXRreXZlIC0tZnJvbSBbeW91ci1rZXktbmFtZV0gLS1jaGFpbi1pZCBrb3JlbGxpYQo="}}),e._v(" "),a("p",[e._v("Unjail")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"Li9jaGFpbmQgdHggc2xhc2hpbmcgdW5qYWlsIC0tY2hhaW4taWQga29yZWxsaWEgLS1mcm9tIFt5b3VyLWtleS1uYW1lXQo="}})],1)}),[],!1,null,null,null);t.default=s.exports}}]);