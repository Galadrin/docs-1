(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{664:function(e,t,a){"use strict";a.r(t);var o=a(0),s=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"adding-data"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#adding-data"}},[e._v("#")]),e._v(" Adding data")]),e._v(" "),a("p",[e._v("You may want to insert data from another blockchain and store it in KYVE's data warehouse.")]),e._v(" "),a("p",[e._v("To do this, you'll want to write an integration.")]),e._v(" "),a("h3",{attrs:{id:"_0-gather-necessary-information-from-the-chain-you-would-like-to-integrate-into-kyve"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0-gather-necessary-information-from-the-chain-you-would-like-to-integrate-into-kyve"}},[e._v("#")]),e._v(" 0. Gather necessary information from the chain you would like to integrate into KYVE")]),e._v(" "),a("ul",[a("li",[e._v("RPC endpoint")]),e._v(" "),a("li",[e._v("SDK's for the source blockchain")])]),e._v(" "),a("h3",{attrs:{id:"_1-clone-the-template-repo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-clone-the-template-repo"}},[e._v("#")]),e._v(" 1. Clone the template repo")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"Z2l0IGNsb25lIGh0dHBzOi8vZ2l0aHViLmNvbS95aXJlbmx1OTIvS3l2ZUludGVncmF0aW9uVGVtcGxhdGUKY2QgS3l2ZUludGVncmF0aW9uVGVtcGxhdGUK"}}),e._v(" "),a("h3",{attrs:{id:"_2-add-configuration-for-your-chain"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-add-configuration-for-your-chain"}},[e._v("#")]),e._v(" 2. Add configuration for your chain")]),e._v(" "),a("p",[e._v("Open up "),a("code",[e._v("package.json")]),e._v(" in your cloned repo.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"dmkgcGFja2FnZS5qc29uCg=="}}),e._v(" "),a("p",[e._v("Update the name and version to fit your integration/runtime.")]),e._v(" "),a("p",[e._v("So for example:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"json",base64:"ewomcXVvdDtuYW1lJnF1b3Q7OiAmcXVvdDtAa3l2ZS9zb2xhbmEmcXVvdDssCiZxdW90O3ZlcnNpb24mcXVvdDs6ICZxdW90OzAuMS4wJnF1b3Q7LAouLi4KfQo="}}),e._v(" "),a("h3",{attrs:{id:"_3-extend-the-kyve-class"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-extend-the-kyve-class"}},[e._v("#")]),e._v(" 3. Extend the "),a("code",[e._v("KYVE")]),e._v(" class")]),e._v(" "),a("p",[e._v("Now open up the "),a("code",[e._v("src/index.ts")]),e._v(" file from the root of the repo.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"dmkgc3JjL2luZGV4LnRzCg=="}}),e._v(" "),a("p",[e._v("All the places that you need to change will be marked with a "),a("code",[e._v("TODO:")]),e._v(" comment -- make sure you follow the instructions below to fill them all in.")]),e._v(" "),a("p",[e._v("Extend the "),a("code",[e._v("KYVE")]),e._v(" class with a camel-cased class extension name, for example:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"ts",base64:"aW1wb3J0CgpjbGFzcyBLeXZlU29sYW5hIGV4dGVuZHMgS1lWRSB7CiAgICAuLi4KfQo="}}),e._v(" "),a("h3",{attrs:{id:"_4-fill-in-the-getdataitem-method"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-fill-in-the-getdataitem-method"}},[e._v("#")]),e._v(" 4. Fill in the "),a("code",[e._v("getDataItem")]),e._v(" method")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("getDataItem")]),e._v(" method that you implement should take in a "),a("code",[e._v("key")]),e._v(", which is the "),a("a",{attrs:{href:"https://academy.binance.com/en/glossary/block-height",target:"_blank",rel:"noopener noreferrer"}},[e._v("height"),a("OutboundLink")],1),e._v(" of the blockchain block you are indexing. (Block height refers to a specific location in a blockchain, measured by how many confirmed blocks precede it.) The method should return the value for that particular key, which can be anything from a JSON object to a string.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"ts",base64:"ICBwdWJsaWMgYXN5bmMgZ2V0RGF0YUl0ZW0oa2V5OiBudW1iZXIpOiBQcm9taXNlJmx0O3sga2V5OiBudW1iZXI7IHZhbHVlOiBhbnkgfSZndDsK"}}),e._v(" "),a("p",[e._v("Every "),a("code",[e._v("getDataItem")]),e._v(" method will likely take the RPC endpoint from step 1, and either pass it to an SDK provided by the source chain or third party library provider like Ethers or Web3JS; OR the method will call the public RPC endpoint directly for data.")]),e._v(" "),a("p",[e._v("Once the data comes back from the source chain, you can choose to clean up the data before returning it in the method.")]),e._v(" "),a("h2",{attrs:{id:"examples"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#examples"}},[e._v("#")]),e._v(" Examples")]),e._v(" "),a("h3",{attrs:{id:"kyve-solana-integration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kyve-solana-integration"}},[e._v("#")]),e._v(" KYVE-Solana Integration")]),e._v(" "),a("p",[e._v("As an example, let's walk through the Solana integration. The "),a("code",[e._v("KyveSolana")]),e._v(" class is as below.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"ts",base64:"Y2xhc3MgS3l2ZVNvbGFuYSBleHRlbmRzIEtZVkUgewogIHB1YmxpYyBhc3luYyBnZXREYXRhSXRlbShrZXk6IG51bWJlcik6IFByb21pc2UmbHQ7eyBrZXk6IG51bWJlcjsgdmFsdWU6IGFueSB9Jmd0OyB7CiAgICBsZXQgYmxvY2s7CgogICAgdHJ5IHsKICAgICAgYmxvY2sgPSBhd2FpdCBmZXRjaEJsb2NrKAogICAgICAgIHRoaXMucG9vbC5jb25maWcucnBjLAogICAgICAgIGtleSwKICAgICAgICBhd2FpdCB0aGlzLmdldFNpZ25hdHVyZSgpCiAgICAgICk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgaWYgKHdhc1Nsb3RTa2lwcGVkKGVyciwga2V5KSkgcmV0dXJuIHsga2V5LCB2YWx1ZTogbnVsbCB9OwoKICAgICAgdGhpcy5sb2dnZXIud2FybigKICAgICAgICBg4pqg77iPICBFWFRFUk5BTCBFUlJPUjogRmFpbGVkIHRvIGZldGNoIGJsb2NrICR7a2V5fS4gUmV0cnlpbmcgLi4uYAogICAgICApOwoKICAgICAgdGhyb3cgZXJyOwogICAgfQoKICAgIHJldHVybiB7IGtleSwgdmFsdWU6IGJsb2NrIH07CiAgfQoKICBwcml2YXRlIGFzeW5jIGdldFNpZ25hdHVyZSgpOiBQcm9taXNlJmx0O1NpZ25hdHVyZSZndDsgewogICAgLy8gLi4uCiAgfQp9Cg=="}}),e._v(" "),a("p",[e._v("Let's take a closer look at the "),a("code",[e._v("fetchBlock")]),e._v(" helper method, which in this case lives in its own "),a("code",[e._v("utils.ts")]),e._v(" file.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"ts",base64:"aW1wb3J0IHsgQmxvY2tSZXNwb25zZSwgQ29ubmVjdGlvbiB9IGZyb20gJ0Bzb2xhbmEvd2ViMy5qcyc7CgovLyBOT1RFOiBUaGUgcmVzcG9uc2UgdHlwZSBpc24ndCBjb3JyZWN0IGJlY2F1c2Ugb2Ygb3VyIHBhdGNoLgpleHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hCbG9jaygKICBlbmRwb2ludDogc3RyaW5nLAogIGhlaWdodDogbnVtYmVyLAogIHNpZ25hdHVyZTogU2lnbmF0dXJlCik6IFByb21pc2UmbHQ7QmxvY2tSZXNwb25zZSZndDsgewogIGNvbnN0IHByb3ZpZGVyID0gaW5pdGlhbGlzZVNvbGFuYVJQQyhlbmRwb2ludCwgc2lnbmF0dXJlKTsKCiAgcmV0dXJuIChhd2FpdCBwcm92aWRlci5nZXRCbG9jayhoZWlnaHQpKSE7Cn0KCmZ1bmN0aW9uIGluaXRpYWxpc2VTb2xhbmFSUEMoCiAgZW5kcG9pbnQ6IHN0cmluZywKICBzaWduYXR1cmU6IFNpZ25hdHVyZQopOiBDb25uZWN0aW9uIHsKICByZXR1cm4gbmV3IENvbm5lY3Rpb24oZW5kcG9pbnQsIHsKICAgIGh0dHBIZWFkZXJzOiB7CiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgIFNpZ25hdHVyZTogc2lnbmF0dXJlLnNpZ25hdHVyZSwKICAgICAgJ1B1YmxpYy1LZXknOiBzaWduYXR1cmUucHViS2V5LAogICAgICAnUG9vbC1JRCc6IHNpZ25hdHVyZS5wb29sSWQsCiAgICAgIFRpbWVzdGFtcDogc2lnbmF0dXJlLnRpbWVzdGFtcCwKICAgIH0sCiAgfSk7Cn0K"}}),e._v(" "),a("p",[e._v("The "),a("code",[e._v("fetchBlock")]),e._v(" method first initializes a connection to the Solana API and then calls the "),a("code",[e._v("getBlock()")]),e._v(" method that is provided in the Solana SDK.")]),e._v(" "),a("h3",{attrs:{id:"kyve-cosmos-integration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kyve-cosmos-integration"}},[e._v("#")]),e._v(" KYVE-Cosmos Integration")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("fetchBlock")]),e._v(" helper method for the KYVE-Cosmos integration fetches data from the source chain (Cosmos) directly from Cosmos's RPC endpoints.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"ZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoQmxvY2soCiAgZW5kcG9pbnQ6IHN0cmluZywKICBoZWlnaHQ6IG51bWJlciwKICBzaWduYXR1cmU6IFNpZ25hdHVyZQopOiBQcm9taXNlJmx0O2FueSZndDsgewogIGNvbnN0IHJlcyA9IGF3YWl0IGNhbGwmbHQ7YW55Jmd0OygKICAgIGAke2VuZHBvaW50fS9jb3Ntb3MvYmFzZS90ZW5kZXJtaW50L3YxYmV0YTEvYmxvY2tzLyR7aGVpZ2h0fWAsCiAgICBzaWduYXR1cmUKICApOwoKICBjb25zdCB0eHMgPSBhd2FpdCBmZXRjaFRyYW5zYWN0aW9ucygKICAgIGVuZHBvaW50LAogICAgcmVzLmJsb2NrLmRhdGEudHhzLm1hcChwYXJzZUVuY29kZWRUeCksCiAgICBzaWduYXR1cmUKICApOwoKICByZXR1cm4gewogICAgLi4ucmVzLmJsb2NrLAogICAgZGF0YTogewogICAgICAuLi5yZXMuYmxvY2suZGF0YSwKICAgICAgdHhzLAogICAgfSwKICB9Owp9Cg=="}}),e._v(" "),a("h2",{attrs:{id:"custom-logic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#custom-logic"}},[e._v("#")]),e._v(" Custom Logic")]),e._v(" "),a("p",[e._v("In addition to the "),a("code",[e._v("getDataItem")]),e._v(" method which must be implemented, you are free to implement custom methods in your class.")]),e._v(" "),a("h3",{attrs:{id:"custom-signatures"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#custom-signatures"}},[e._v("#")]),e._v(" Custom Signatures")]),e._v(" "),a("p",[e._v("For example, for several of the existing integrations, we have implemented custom signatures.")]),e._v(" "),a("p",[e._v("These signatures, which were implemented to prevent spamming of private endpoints, are calculated from the address (conveniently exposed in the class through your wallet) and the message. They can be used for signature verification.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"ts",base64:"Y2xhc3MgS3l2ZVNvbGFuYSBleHRlbmRzIEtZVkUgewogIHB1YmxpYyBhc3luYyBnZXREYXRhSXRlbShrZXk6IG51bWJlcik6IFByb21pc2UmbHQ7eyBrZXk6IG51bWJlcjsgdmFsdWU6IGFueSB9Jmd0OyB7CiAgICBsZXQgYmxvY2s7CgogICAgdHJ5IHsKICAgICAgYmxvY2sgPSBhd2FpdCBmZXRjaEJsb2NrKAogICAgICAgIHRoaXMucG9vbC5jb25maWcucnBjLAogICAgICAgIGtleSwKICAgICAgICBhd2FpdCB0aGlzLmdldFNpZ25hdHVyZSgpCiAgICAgICk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgLi4uCiAgICB9CgogICAgcmV0dXJuIHsga2V5LCB2YWx1ZTogYmxvY2sgfTsKICB9CgogIHByaXZhdGUgYXN5bmMgZ2V0U2lnbmF0dXJlKCk6IFByb21pc2UmbHQ7U2lnbmF0dXJlJmd0OyB7CiAgICBjb25zdCBhZGRyZXNzID0gYXdhaXQgdGhpcy5zZGsud2FsbGV0LmdldEFkZHJlc3MoKTsKICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudmFsdWVPZigpLnRvU3RyaW5nKCk7CgogICAgY29uc3QgbWVzc2FnZSA9IGAke2FkZHJlc3N9Ly8ke3RoaXMucG9vbElkfS8vJHt0aW1lc3RhbXB9YDsKCiAgICBjb25zdCB7IHNpZ25hdHVyZSwgcHViX2tleSB9ID0gYXdhaXQgdGhpcy5zZGsuc2lnblN0cmluZyhtZXNzYWdlKTsKCiAgICByZXR1cm4gewogICAgICBzaWduYXR1cmUsCiAgICAgIHB1YktleTogcHViX2tleS52YWx1ZSwKICAgICAgcG9vbElkOiB0aGlzLnBvb2xJZC50b1N0cmluZygpLAogICAgICB0aW1lc3RhbXAsCiAgICB9OwogIH0KfQo="}}),e._v(" "),a("h3",{attrs:{id:"_5-test-your-integration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-test-your-integration"}},[e._v("#")]),e._v(" 5. Test your integration")]),e._v(" "),a("p",[e._v("Now that you've successfully extended "),a("code",[e._v("KYVE")]),e._v(" and implemented your "),a("code",[e._v("getDataItem")]),e._v(" class method, it's time to test your integration!")]),e._v(" "),a("p",[e._v("To proceed to this next step, reach out to the "),a("a",{attrs:{href:"https://discord.gg/kyve",target:"_blank",rel:"noopener noreferrer"}},[e._v("KYVE Discord"),a("OutboundLink")],1),e._v(" channel for help.")])],1)}),[],!1,null,null,null);t.default=s.exports}}]);